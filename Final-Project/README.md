# Clickmania by Half-Full Stack Devs

A simulated game for an NFT-inspired marketplace for buying and selling digital art

**Demo**: https://youtu.be/hmzJu7UKxqk
[![Clickmania Demo](https://i.imgur.com/4GV0WtD.png)](https://youtu.be/hmzJu7UKxqk)


## Requirements

- Docker
- Django
- Node.js
- React
- Python

## Deployment (Docker)

### Environment Setup

Before we deploy, we'll need the environment variables properly setup.

For the `.env_file` in the root directory (`/`), copy & paste these lines to it:

```env
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_ROOT_HOST=%
MYSQL_DATABASE=art_db
MYSQL_USER=tester
MYSQL_PASSWORD=secret
MYSQL_ROOT_PASSWORD=super_secret
```

For the `.env` in the server directory (`/server/server/`), copy & paste these lines to it:

```env
DB_ENGINE=django.db.backends.mysql
DB_NAME=art_db
DB_USER=tester
DB_PASSWORD=secret
DB_HOST=db
DB_PORT=3306

SECRET_KEY=django-insecure-rbcuhf5w95xnmjnp@4ku_r=+(*vupq!4nvpbycdr3kp#%*r@y

JWT_KEY=secret
```

Then simply follow the deployment steps below.

### Production Deployment

To deploy, try to run the following commands:

`docker-compose down && docker system prune -f`

`docker-compose build && docker-compose up`

Then visit http://localhost

### Development Deployment

#### Environment Setup

For the `.env` in the root directory (`/client`), copy & paste this line:

```env
REACT_APP_API_URL=http://localhost:8000/api/
```

If the production deployment doesn't work, then follow the steps below.

Change the `DATABASES` setting in `server/server/settings.py` to use sqlite:

```js
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',
    }
}
```

To get the database setup and run the server, we'll have to run some migrations. In the server directory, execute the following commands:

```sh
pip install -r requirements.txt
python manage.py makemigrations
python manage.py migrate
python manage.py loaddata fixture.json
python manage.py runserver
```

For running the client, navigate to the client directory and run npm:

```sh
npm i
npm start
```

The client should open up the app in your default browser. If not, then visit http://localhost:3000

## Walkthrough / Main Features

Some default users will be available for testing. Then login to these accounts and test out all the site pages.

```
user: test_user1
password: cmpt470

user: test_user2
password: cmpt470
```

If you'd like to test out the entire site yourself, then here's a simple walkthrough to get going:

- We'd recommend creating an account & logging in as the first step, it'll allow you to use the site to its full potential
- Go to the Clicker page and get at least a 100 coins for buying you first art piece
- You can win art pieces by purchasing a lootbox in the Store page
- To view the rarity of the arts in the Store, click on the "?" icon for your chances to pull a specific type of art
- You can view your art pieces on the My Collection page
- The collections page will also allow you to sell your art to the marketplace
- The Trade page (marketplace) will allow you to view all the art pieces available for sale
- Feel free to use another account in a separate browser for testing the buying function in the marketplace

## Client-side Overview

React makes up the majority of the functionality in this end.

### Home Page

After opening up the site, you'll be greeted by the home page. This page mainly displays some of the art pieces available in the site.

In order to use the site to its full potential, we will need to create an account.

### Sign in / Register

The Sign-in and Register pages are relatively straightforward.

- The registration page allows you to sign up for an account
- The sign-in page allows you to login with the account you registered for

### Clicker

There is currency in this app. Coins are used to buy art pieces. Coins can be collected in the Clicker page where the user click the coin to earn as many coins as possible.

### Store (Loot Boxes)

To spend your *hand-earned* money, you can buy art pieces from the Store page. But, you cannot simply buy art directly. Instead the art piece is randomly chosen for you where you may choose between the "Face Terrors" or "Almost Human" packs. Each art piece has a different rarity, so you're more likely to recieve common art pieces than rarer ones.

Note: These art pieces were generated by a Pytorch DCGAN model before being added to the project.

### Trade (Marketplace)

If you do not want to keep your art, then you can sell them in the marketpace for a price of your choosing. Other users will be able to view all the sales avialable, including yours, and decide if they will buy the art for that price. Once a user has bought one of your sales, then you will recieve coins in exchange for your art piece.

### My Collection

To view the art pieces that you own, simply go the the My Collection page. You will also have the option to sell the art on the marketplace in this view.

## Server-side Overview

- The client communicated to the server using REST APIs
- The Django backend  handles these requests
- The server communicates with the MySQL database to handle all the data get and post requests
- Models and views are used to modify or update the database to avoid any potential SQL Injection attacks
